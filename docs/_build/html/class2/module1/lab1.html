<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>2.1.1. Lab 1: Configure pools and internal virtual servers</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="2.1.1. Lab 1: Configure pools and internal virtual servers"/>
  <meta name="product" content="F5 Firewall Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-01-28 09:36:45"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Firewall Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2.1.1. Lab 1: Configure pools and internal virtual servers &#8212; F5 Firewall Solutions  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.1.2. Lab 2: Leverage LTM Policies To Direct SSL Terminated Applications To Secondary Virtual Servers" href="lab2.html" />
    <link rel="prev" title="2.1. Module 1: F5 Multi-layer Firewall" href="module1.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Firewall Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">1. Class 1: AFM – The Data Center Firewall</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class2.html">2. Advanced Multi-Layer Firewall Protection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">3. Class - F5 BIG-IP DDoS and DNS DoS Protections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">4. Flowmon Integrated Out-of-path DDoS Solution</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">2.1.1. Lab 1: Configure pools and internal virtual servers</a><ul>
<li><a class="reference internal" href="#create-application-pools">2.1.1.1. Create Application Pools</a></li>
<li><a class="reference internal" href="#create-internal-application-virtual-servers">2.1.1.2. Create <strong>Internal</strong> Application Virtual Servers</a></li>
<li><a class="reference internal" href="#create-an-external-virtual-server-to-host-multiple-ssl-enabled-websites">2.1.1.3. Create An External Virtual Server To Host Multiple SSL Enabled Websites</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Firewall Solutions</a>
              &gt; <a href="../class2.html">2. Advanced Multi-Layer Firewall Protection</a>
              &gt; <a href="module1.html">2.1. Module 1: F5 Multi-layer Firewall</a>

          <span class="right">
             <a href="../../_sources/class2/module1/lab1.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-firewall">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-1-configure-pools-and-internal-virtual-servers">
<h1>2.1.1. Lab 1: Configure pools and internal virtual servers<a class="headerlink" href="#lab-1-configure-pools-and-internal-virtual-servers" title="Permalink to this headline">¶</a></h1>
<p>A virtual server is used by BIG-IP to identify specific types of
traffic. Other objects such as profiles, policies, pools and iRules are
applied to the virtual server to add features and functionality. In the
context of security, since BIG-IP is a default-deny device, a virtual
server is necessary to accept specific types of traffic.</p>
<p>The pool is a logical group of hosts that is applied to and will receive
traffic from a virtual server.</p>
<p>On your personal device</p>
<p>Look at the supplemental login instructions for:</p>
<ul class="simple">
<li>External Hostnames</li>
<li>External IP addressing diagram</li>
<li>Login IDs and Passwords are subject to change as well.</li>
</ul>
<p><img alt="image1" src="../../_images/image310.png" /></p>
<div class="section" id="create-application-pools">
<h2>2.1.1.1. Create Application Pools<a class="headerlink" href="#create-application-pools" title="Permalink to this headline">¶</a></h2>
<p>On BIG-IP</p>
<p>Create the following pools using the following tabel of pool information.  Note that each pool has only one pool member, that is fine for the purposes of our lab:</p>
<p><strong>Navigation:</strong> Local Traffic &gt; Pools &gt; Pool List, then click Create</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Health Monitor</strong></th>
<th class="head"><strong>Members</strong></th>
<th class="head"><strong>Service Port</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pool_www.mysite.com</td>
<td>tcp_half_open</td>
<td>10.10.121.129</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>pool_www.mysite.com-api</td>
<td>tcp_half_open</td>
<td>10.10.121.132</td>
<td>80</td>
</tr>
<tr class="row-even"><td>pool_www.theirsite.com</td>
<td>tcp_half_open</td>
<td>10.10.121.131</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>pool_www.yoursite.com</td>
<td>tcp_half_open</td>
<td>10.10.121.130</td>
<td>80</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../_images/image4.png"><img alt="image2" src="../../_images/image4.png" style="width: 6.74931in; height: 5.88401in;" /></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Leave all other fields using the default values.</p>
</div>
<p><strong>Navigation:</strong> Click Finished</p>
<p><a class="reference internal" href="../../_images/image510.png"><img alt="image3" src="../../_images/image510.png" style="width: 7.05556in; height: 1.33333in;" /></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The pools should now show a green circle for status.</p>
</div>
</div>
<div class="section" id="create-internal-application-virtual-servers">
<h2>2.1.1.2. Create <strong>Internal</strong> Application Virtual Servers<a class="headerlink" href="#create-internal-application-virtual-servers" title="Permalink to this headline">¶</a></h2>
<p>By using the term ‘internal’ we are creating the virtual servers on what is essentially a loopback VLAN which prevents them from being exposed.</p>
<p>Create the following internal virtual servers using the following table of information:</p>
<p><strong>Navigation:</strong> Local Traffic &gt; Virtual Servers &gt; Virtual Server List, then
click Create. ( Change to “Advanced” configuration style )</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Properties</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">int_vip_www.mysite.com_1.1.1.1</span></code></td>
<td><p class="first"><strong>Dest</strong>: <code class="docutils literal notranslate"><span class="pre">1.1.1.1</span></code></p>
<p><strong>Port</strong>: <code class="docutils literal notranslate"><span class="pre">80</span></code></p>
<p><strong>HTTP Profile</strong>: http</p>
<p><strong>Enabled on VLAN</strong>: <code class="docutils literal notranslate"><span class="pre">loopback</span></code></p>
<p><strong>SNAT</strong>: AUTO</p>
<p class="last"><strong>Default Pool</strong>: <code class="docutils literal notranslate"><span class="pre">pool_www.mysite.com</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">int_vip_www.mysite.com-api_1.1.1.2</span></code></td>
<td><p class="first"><strong>Dest</strong>: <code class="docutils literal notranslate"><span class="pre">1.1.1.2</span></code></p>
<p><strong>Port</strong>: <code class="docutils literal notranslate"><span class="pre">80</span></code></p>
<p><strong>HTTP Profile</strong>: http</p>
<p><strong>Enabled on VLAN</strong>: <code class="docutils literal notranslate"><span class="pre">loopback</span></code></p>
<p><strong>SNAT</strong>: AUTO</p>
<p class="last"><strong>Default Pool</strong>: <code class="docutils literal notranslate"><span class="pre">pool_www.mysite.com-api</span></code></p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">int_vip_www.mysite.com-downloads_1.1.1.3</span></code></td>
<td><p class="first"><strong>Dest</strong>: <code class="docutils literal notranslate"><span class="pre">1.1.1.3</span></code></p>
<p><strong>Port</strong>: <code class="docutils literal notranslate"><span class="pre">80</span></code></p>
<p><strong>HTTP Profile</strong>: http</p>
<p><strong>Enabled on VLAN</strong>: <code class="docutils literal notranslate"><span class="pre">loopback</span></code></p>
<p><strong>SNAT</strong>: AUTO</p>
<p class="last"><strong>Default Pool</strong>: <code class="docutils literal notranslate"><span class="pre">pool_www.mysite.com</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">int_vip_www.theirsite.com_2.2.2.2</span></code></td>
<td><p class="first"><strong>Dest</strong>: <code class="docutils literal notranslate"><span class="pre">2.2.2.2</span></code></p>
<p><strong>Port</strong>: <code class="docutils literal notranslate"><span class="pre">80</span></code></p>
<p><strong>HTTP Profile</strong>: http</p>
<p><strong>Enabled on VLAN</strong>: <code class="docutils literal notranslate"><span class="pre">loopback</span></code></p>
<p><strong>SNAT</strong>: AUTO</p>
<p class="last"><strong>Default Pool</strong>: <code class="docutils literal notranslate"><span class="pre">pool_www.theirsite.com</span></code></p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">int_vip_www.yoursite.com_3.3.3.3</span></code></td>
<td><p class="first"><strong>Dest</strong>: <code class="docutils literal notranslate"><span class="pre">3.3.3.3</span></code></p>
<p><strong>Port</strong>: <code class="docutils literal notranslate"><span class="pre">80</span></code></p>
<p><strong>HTTP Profile</strong>: http</p>
<p><strong>Enabled on VLAN</strong>: <code class="docutils literal notranslate"><span class="pre">loopback</span></code></p>
<p><strong>SNAT</strong>: AUTO</p>
<p class="last"><strong>Default Pool</strong>: <code class="docutils literal notranslate"><span class="pre">pool_www.yoursite.com</span></code></p>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../_images/image6.png"><img alt="image4" src="../../_images/image6.png" style="width: 7.05556in; height: 3.22222in;" /></a></p>
<p><a class="reference internal" href="../../_images/image710.png"><img alt="image5" src="../../_images/image710.png" style="width: 7.05556in; height: 7.31944in;" /></a></p>
<p><a class="reference internal" href="../../_images/image88.png"><img alt="image6" src="../../_images/image88.png" style="width: 7.05000in; height: 3.46949in;" /></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Leave all other fields using the default values.</p>
</div>
<p><strong>Navigation:</strong> Click <strong>Finished</strong></p>
<p><img alt="image7" src="../../_images/lab1_networkmap.png" /></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The virtual servers should now show a green circle for status.</p>
</div>
</div>
<div class="section" id="create-an-external-virtual-server-to-host-multiple-ssl-enabled-websites">
<h2>2.1.1.3. Create An External Virtual Server To Host Multiple SSL Enabled Websites<a class="headerlink" href="#create-an-external-virtual-server-to-host-multiple-ssl-enabled-websites" title="Permalink to this headline">¶</a></h2>
<p>Create the external virtual server using the following information.</p>
<p><strong>Navigation: _Local Traffic &gt; Virtual Servers &gt; Virtual Server List_</strong>, then
click <strong>Create</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Dest</strong></th>
<th class="head"><strong>Port</strong></th>
<th class="head"><strong>HTTP Profile</strong></th>
<th class="head"><strong>SSL Profile (Client)</strong></th>
<th class="head"><strong>Default Pool</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>EXT_VIP_10.10.99.30</td>
<td>10.10.99.30</td>
<td>443</td>
<td>http</td>
<td><p class="first">www.mysite.com</p>
<p>www.theirsite.com</p>
<p class="last">www.yoursite.com</p>
</td>
<td>pool_www.mysite.com</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../_images/image1010.png"><img alt="image8" src="../../_images/image1010.png" style="width: 7.05556in; height: 2.63889in;" /></a></p>
<p><a class="reference internal" href="../../_images/image1110.png"><img alt="image9" src="../../_images/image1110.png" style="width: 7.05556in;" /></a></p>
<p><a class="reference internal" href="../../_images/image1210.png"><img alt="image10" src="../../_images/image1210.png" style="width: 7.05556in;" /></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default pool is here simply to let the virtual server turn green. Policies will be used to switch traffic, not hard-coded pools.  Note also the three different certificates applied to the Virtual Server.  This is the basis of SNI.</p>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Try accessing all the VS you created from the Windows host via ping and Chrome. There are bookmarks saved to access it.  Ping works, but web browsing ( chrome or curl ) does not work because our policies are not set up yet.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This completes Module 1 - Lab 1</p>
</div>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="module1.html" title="2.1. Module 1: F5 Multi-layer Firewall" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab2.html" title="2.1.2. Lab 2: Leverage LTM Policies To Direct SSL Terminated Applications To Secondary Virtual Servers" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>