<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>2.1.7. Lab 7: Configure A Clone Pool For SSL Visibility To IDS Sensors Or Other Security Tools</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="2.1.7. Lab 7: Configure A Clone Pool For SSL Visibility To IDS Sensors Or Other Security Tools"/>
  <meta name="product" content="F5 Firewall Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-01-28 09:36:45"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Firewall Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2.1.7. Lab 7: Configure A Clone Pool For SSL Visibility To IDS Sensors Or Other Security Tools &#8212; F5 Firewall Solutions  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.2. Module 2: F5 Dynamic Firewall Rules With iRules LX" href="../module2/module2.html" />
    <link rel="prev" title="2.1.6. Lab 6: Configure HTTP security" href="lab6.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Firewall Solutions  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">1. Class 1: AFM – The Data Center Firewall</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class2.html">2. Advanced Multi-Layer Firewall Protection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">3. Class - F5 BIG-IP DDoS and DNS DoS Protections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">4. Flowmon Integrated Out-of-path DDoS Solution</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">2.1.7. Lab 7: Configure A Clone Pool For SSL Visibility To IDS Sensors Or Other Security Tools</a></li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Firewall Solutions</a>
              &gt; <a href="../class2.html">2. Advanced Multi-Layer Firewall Protection</a>
              &gt; <a href="module1.html">2.1. Module 1: F5 Multi-layer Firewall</a>

          <span class="right">
             <a href="../../_sources/class2/module1/lab7.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-firewall">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-7-configure-a-clone-pool-for-ssl-visibility-to-ids-sensors-or-other-security-tools">
<h1>2.1.7. Lab 7: Configure A Clone Pool For SSL Visibility To IDS Sensors Or Other Security Tools<a class="headerlink" href="#lab-7-configure-a-clone-pool-for-ssl-visibility-to-ids-sensors-or-other-security-tools" title="Permalink to this headline">¶</a></h1>
<p>SSL encrypted traffic poses a problem for most security devices. The performance of those devices is significantly impacted when trying to decrypt SSL traffic. Since the BIG-IP is designed to handle SSL traffic with specialized hardware and optimized software libraries, it is in the unique position to ‘hand-off’ a copy of the decrypted traffic to other devices.</p>
<p>In this solution, since the BIG-IP is terminating SSL on the external virtual server, when we forward the traffic to the secondary virtual server in clear-text we have an opportunity to make an unencrypted copy of the application traffic and send it to an external sensor such as an IDS for further security assessment.</p>
<p>On BIG-IP</p>
<p>Configure a new Pool.</p>
<p><strong>Navigation:</strong> Local Traffic &gt; Pools &gt; Pool List &gt; Click Create.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="31%" />
<col width="21%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Health Monitor</strong></th>
<th class="head"><strong>Members</strong></th>
<th class="head"><strong>Service Port</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IDS_Pool</td>
<td>gateway_icmp</td>
<td>172.1.1.11</td>
<td>*</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="../../_images/image581.png"><img alt="image58" src="../../_images/image581.png" style="width: 5.65139in; height: 5.75556in;" /></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Leave all other fields using the default values.</p>
</div>
<p><strong>Navigation:</strong> Click Finished.</p>
<p>Attach the <em>IDS_Pool</em> as a clone pool to the server side of the external virtual server</p>
<p><strong>Navigation:</strong> Local Traffic &gt; Virtual Servers &gt; Virtual Server List &gt; EXT_VIP_10.10.99.30.</p>
<p><strong>Navigation:</strong> Configuration &gt; Advanced.</p>
<p><a class="reference internal" href="../../_images/image591.png"><img alt="image59" src="../../_images/image591.png" style="width: 4.66626in; height: 4.24264in;" /></a></p>
<p><strong>Navigation:</strong> Scroll to the configuration for Clone Pools and select the IDS_Pool</p>
<p><a class="reference internal" href="../../_images/image601.png"><img alt="image60" src="../../_images/image601.png" style="width: 4.83440in; height: 2.18569in;" /></a></p>
<p><strong>Navigation:</strong> Click on update at the bottom of the page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Leave all other fields using the default values.</p>
</div>
<p><strong>Navigation:</strong> SSH in to the Syslog/Webserver</p>
<p>Run sudo tcpdump –i eth2 -c 200 port 80</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">root@syslogWebserver:~#</span> sudo tcpdump -i eth2 -c <span class="m">200</span> port <span class="m">80</span>
</pre></div>
</div>
<p>Initiate another attempt to connect to the website via curl or your web browser on the Windows host.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">curl -k https://10.10.99.30 -H &#39;Host:www.mysite.com&#39;</span>

<span class="go">&lt;H1&gt; MYSITE.COM &lt;/H1&gt;</span>
</pre></div>
</div>
<p>View the tcpdump output on the syslog-webserver.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">tcpdump: verbose output suppressed, use -v or -vv for full protocol decode</span>
<span class="go">listening on eth2, link-type EN10MB (Ethernet), capture size 262144 bytes</span>
<span class="go">17:25:42.585675 IP 10.10.99.222.50924 &gt; 1.1.1.1.http: Flags [S], seq 912073522, win 4380, options [mss 1460,sackOK,eol], length 0</span>
<span class="go">17:25:42.585905 IP 1.1.1.1.http &gt; 10.10.99.222.50924: Flags [S.], seq 1263282834, ack 912073523, win 4380, options [mss 1460,sackOK,eol], length 0</span>
<span class="go">17:25:42.585918 IP 10.10.99.222.50924 &gt; 1.1.1.1.http: Flags [.], ack 1, win 4380, length 0</span>
<span class="go">17:25:42.585926 IP 10.10.99.222.50924 &gt; 1.1.1.1.http: Flags [P.], seq 1:79, ack 1, win 4380, length 78</span>
<span class="go">17:25:42.586750 IP 1.1.1.1.http &gt; 10.10.99.222.50924: Flags [.], ack 79, win 4458, length 0</span>
<span class="go">17:25:42.673178 IP 1.1.1.1.http &gt; 10.10.99.222.50924: Flags [P.], seq 1:252, ack 79, win 4458, length 251</span>
<span class="go">17:25:42.673231 IP 10.10.99.222.50924 &gt; 1.1.1.1.http: Flags [.], ack 252, win 4631, length 0</span>
<span class="go">17:25:42.676360 IP 10.10.99.222.50924 &gt; 1.1.1.1.http: Flags [F.], seq 79, ack 252, win 4631, length 0</span>
<span class="go">17:25:42.676972 IP 1.1.1.1.http &gt; 10.10.99.222.50924: Flags [.], ack 80, win 4458, length 0</span>
<span class="go">17:25:42.688028 IP 1.1.1.1.http &gt; 10.10.99.222.50924: Flags [F.], seq 252, ack 80, win 4458, length 0</span>
<span class="go">17:25:42.688057 IP 10.10.99.222.50924 &gt; 1.1.1.1.http: Flags [.], ack 253, win 4631, length 0</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">A copy of the web traffic destined for the internal virtual server is received by the monitoring device on 172.1.1.11. Alternatively you could attach the clone pool to the client side of the internal virtual server. How is the traffic getting to the server when the source and destination IP addresses are not on that interface?</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the end of Module 1 - Lab 7.</p>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab6.html" title="2.1.6. Lab 6: Configure HTTP security" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../module2/module2.html" title="2.2. Module 2: F5 Dynamic Firewall Rules With iRules LX" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="../../_static/js/bootstrap.min.js"></script>
  <script src="../../_static/js/clouddocs.js"></script>
  <script src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>